# AI图片描述优化插件 - 产品原型设计

## 1. 功能概述

这是一个针对剪映AI图片生成网站的浏览器插件，用于优化和增强用户的图片描述输入，提高AI生成图片的质量和准确性。

## 2. UI界面设计

### 2.1 插件激活后的界面布局

```
┌─────────────────────────────────────────────────────────────────┐
│                    原始网站内容                                    │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │              原始文本输入框                                  │ │
│  │  [请输入您想要生成的图片描述...]                              │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                  插件增强区域                                │ │
│  │                                                             │ │
│  │  📊 图片描述优化助手                          [🔧 设置]     │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │                                                             │ │
│  │  🎨 图片风格:     [卡通风格 ▼]                              │ │
│  │  🎭 人物特征:     [现代人物 ▼]                              │ │
│  │  🌈 色彩风格:     [明亮色调 ▼]                              │ │
│  │  📐 构图方式:     [居中构图 ▼]                              │ │
│  │  🌍 场景设定:     [室内场景 ▼]                              │ │
│  │  💡 光影效果:     [自然光 ▼]                                │ │
│  │  🤖 AI模型:      [ChatGPT-3.5 ▼]                          │ │
│  │                                                             │ │
│  │                    [🚀 优化描述]                            │ │
│  │                                                             │ │
│  │  📝 优化后的描述:                                           │ │
│  │  ┌─────────────────────────────────────────────────────────┐ │
│  │  │                                                         │ │
│  │  │  优化后的图片描述将在这里显示...                         │ │
│  │  │                                                         │ │
│  │  │                                [📋 复制] [📤 应用]      │ │
│  │  └─────────────────────────────────────────────────────────┘ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 详细组件说明

#### 2.2.1 顶部标题栏
- **图标**: 📊 表示数据优化功能
- **标题**: "图片描述优化助手"
- **设置按钮**: 🔧 点击可打开配置面板

#### 2.2.2 特征选择区域
6个核心下拉菜单，每个都有对应的图标：
- 🎨 **图片风格**: 卡通、写实、油画、水彩、素描等
- 🎭 **人物特征**: 现代人物、古装人物、动漫角色、抽象人物等
- 🌈 **色彩风格**: 明亮、暗调、黑白、复古、霓虹等
- 📐 **构图方式**: 居中、三分法、对称、动态等
- 🌍 **场景设定**: 室内、户外、城市、自然、太空等
- 💡 **光影效果**: 自然光、人工光、逆光、侧光等

#### 2.2.3 AI模型选择
- 🤖 **AI模型**: 支持多个开源免费AI模型
  - ChatGPT-3.5
  - Claude-3-Haiku
  - Gemini Pro
  - 通义千问
  - 文心一言

#### 2.2.4 操作按钮
- **🚀 优化描述**: 主要功能按钮，触发AI优化
- **📋 复制**: 复制优化后的描述到剪贴板
- **📤 应用**: 直接将优化后的描述填入原始输入框

## 3. 功能流程设计

### 3.1 插件激活流程
```
用户访问目标网站 → 检测到文本输入框 → 自动注入插件UI → 加载配置文件 → 准备就绪
```

### 3.2 描述优化流程
```
用户选择特征 → 点击"优化描述"按钮 → 读取原始输入和选择项 → 调用AI API → 显示优化结果
```

#### 3.2.1 情况一：原始输入框有内容
```
原始描述: "一只可爱的小猫"
用户选择: 风格-卡通、色彩-明亮、场景-室内
AI优化后: "一只表情生动可爱的卡通小猫咪，毛色鲜艳明亮，坐在温馨的室内客厅沙发上，阳光透过窗户洒在它身上，眼睛大而有神，整体画面温暖治愈"
```

#### 3.2.2 情况二：原始输入框为空
```
用户选择: 风格-科幻、人物-现代、场景-城市、光影-霓虹
AI生成: "未来科幻都市中的现代女性角色，身穿时尚科技感服装，站在高楼大厦间的空中走廊上，周围环绕着绚烂的霓虹灯光，背景是璀璨的夜景城市天际线"
```

## 4. 配置文件结构

### 4.1 主配置文件 (config.json)
```json
{
  "version": "1.0.0",
  "defaultModel": "chatgpt-3.5",
  "categories": [
    {
      "key": "style",
      "name": "图片风格",
      "icon": "🎨",
      "required": false,
      "options": [
        {"value": "cartoon", "label": "卡通风格", "prompt": "cartoon style"},
        {"value": "realistic", "label": "写实风格", "prompt": "photorealistic"},
        {"value": "oil_painting", "label": "油画风格", "prompt": "oil painting style"},
        {"value": "watercolor", "label": "水彩风格", "prompt": "watercolor painting"}
      ]
    },
    {
      "key": "character",
      "name": "人物特征",
      "icon": "🎭",
      "required": false,
      "options": [
        {"value": "modern", "label": "现代人物", "prompt": "modern character"},
        {"value": "ancient", "label": "古装人物", "prompt": "ancient Chinese costume"},
        {"value": "anime", "label": "动漫角色", "prompt": "anime character"},
        {"value": "fantasy", "label": "奇幻人物", "prompt": "fantasy character"}
      ]
    }
  ],
  "aiModels": [
    {
      "id": "chatgpt-3.5",
      "name": "ChatGPT-3.5",
      "apiUrl": "https://api.openai.com/v1/chat/completions",
      "free": true
    },
    {
      "id": "claude-haiku",
      "name": "Claude-3-Haiku",
      "apiUrl": "https://api.anthropic.com/v1/messages",
      "free": true
    }
  ]
}
```

## 5. 技术实现要点

### 5.1 浏览器插件架构
- **Content Script**: 注入目标网站，操作DOM
- **Background Script**: 处理API调用和配置管理
- **Popup/Options**: 插件设置界面
- **Manifest V3**: 使用最新的插件标准

### 5.2 AI API集成
- 支持多个免费开源AI服务
- 错误处理和降级机制
- 请求限制和缓存策略

### 5.3 用户体验优化
- 响应式设计，适配不同屏幕尺寸
- 加载状态指示
- 错误提示和重试机制
- 本地缓存用户选择偏好

## 6. 安全和隐私

### 6.1 数据处理
- 用户输入仅用于AI优化，不存储
- API密钥加密存储
- 支持本地模型选项

### 6.2 权限控制
- 最小权限原则
- 明确的权限说明
- 用户可控的功能开关

## 7. 扩展性设计

### 7.1 插件化架构
- 配置文件热更新
- 自定义特征类别
- 第三方AI模型接入

### 7.2 多语言支持
- 中英文双语界面
- 可扩展的国际化框架

这个原型设计是否符合您的需求？如果有任何需要调整的地方，请告诉我，确认后我将开始实现这个插件。