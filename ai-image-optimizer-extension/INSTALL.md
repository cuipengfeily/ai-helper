# 安装和设置指南

## 🚀 快速开始

### 步骤1: 安装插件

1. **下载源码**
   ```bash
   git clone https://github.com/your-username/ai-image-optimizer-extension.git
   # 或直接下载ZIP包并解压
   ```

2. **安装图标**（必需）
   - 准备三个尺寸的图标文件：16x16、48x48、128x128像素
   - 将图标文件命名为 `icon16.png`、`icon48.png`、`icon128.png`
   - 放置在 `icons/` 目录下

3. **加载到Chrome**
   - 打开Chrome浏览器
   - 地址栏输入：`chrome://extensions/`
   - 开启右上角的"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 `ai-image-optimizer-extension` 文件夹
   - 点击"选择文件夹"完成安装

### 步骤2: 基础配置

1. **点击插件图标**，打开设置页面
2. **选择AI模型**（推荐本地模型）：
   - 本地模型：无需API密钥，完全免费
   - 云端模型：需要配置API密钥

### 步骤3: 本地模型设置（推荐）

1. **安装Ollama**
   ```bash
   # Windows/Mac: 访问 https://ollama.ai/ 下载安装包
   # Linux:
   curl -fsSL https://ollama.ai/install.sh | sh
   ```

2. **下载模型**
   ```bash
   ollama pull llama2          # 基础模型 (3.8GB)
   # 或选择其他模型：
   ollama pull mistral         # 更小更快 (4.1GB)
   ollama pull qwen:7b         # 中文优化 (4.4GB)
   ```

3. **启动服务**
   ```bash
   ollama serve
   ```

4. **测试连接**
   - 在插件设置页面点击"测试本地模型连接"
   - 看到"✅ 连接成功"即可使用

## 🔧 高级配置

### 云端模型API密钥配置

#### OpenAI (ChatGPT)
1. 访问 [OpenAI API Keys](https://platform.openai.com/api-keys)
2. 创建新的API密钥
3. 在插件设置中输入密钥（以 `sk-` 开头）

#### Claude (Anthropic)
1. 访问 [Anthropic Console](https://console.anthropic.com/)
2. 创建API密钥
3. 在插件设置中输入密钥（以 `sk-ant-` 开头）

#### Gemini (Google)
1. 访问 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 创建API密钥
3. 在插件设置中输入密钥（以 `AIza` 开头）

### 高级选项说明

- **自动应用优化结果**: 优化完成后自动填入原输入框
- **保存优化历史**: 本地保存优化记录，可用于回顾和重用
- **最大历史记录数**: 控制保存的历史数量（10-100条）

## 🎯 使用指南

### 基础使用流程

1. **访问目标网站**
   - 打开 [剪映AI图片生成](https://jimeng.jianying.com/ai-tool/home/)
   - 页面加载完成后，输入框下方会自动显示优化面板

2. **选择图片特征**
   - 🎨 图片风格：卡通、写实、油画等
   - 🎭 人物特征：现代、古装、动漫等
   - 🌈 色彩风格：明亮、暗调、霓虹等
   - 📐 构图方式：居中、三分法、对称等
   - 🌍 场景设定：室内、户外、城市等
   - 💡 光影效果：自然光、逆光、侧光等

3. **输入描述**（可选）
   - 有描述：在原有基础上优化增强
   - 无描述：根据特征生成全新描述

4. **点击优化**
   - 选择AI模型（如未选择使用默认模型）
   - 点击"🚀 优化描述"按钮
   - 等待AI处理（通常3-10秒）

5. **应用结果**
   - 查看优化后的描述
   - 点击"📋 复制"复制到剪贴板
   - 点击"📤 应用"直接填入输入框

### 快速预设功能

在插件popup中提供4种快速预设：
- 🎭 卡通风格：明亮色调 + 居中构图
- 📸 写实风格：自然色彩 + 自然光线
- 🌸 动漫风格：明亮色调 + 动漫角色
- 🎨 油画风格：暖色调 + 柔和光线

## 🔍 故障排除

### 常见问题及解决方案

#### 插件无法加载
- **检查文件完整性**: 确保所有文件都已下载
- **检查图标文件**: 必须提供三个尺寸的PNG图标
- **重新加载**: 在扩展管理页面点击"重新加载"

#### 无法检测到输入框
- **确认网站地址**: 必须是 `jimeng.jianying.com` 域名
- **刷新页面**: 页面完全加载后刷新一次
- **检查网页结构**: 网站可能更新了结构

#### 本地模型连接失败
```bash
# 检查Ollama是否运行
ps aux | grep ollama

# 重启Ollama服务
ollama serve

# 检查端口占用
netstat -an | grep 11434
```

#### API调用失败
- **检查网络连接**: 确保能访问相应的API服务
- **验证API密钥**: 确保密钥正确且有余额
- **查看错误日志**: 按F12查看Console中的错误信息

#### 优化结果不满意
- **提供更详细的原始描述**: 原始内容越详细，优化效果越好
- **调整特征组合**: 尝试不同的特征搭配
- **更换AI模型**: 不同模型有不同的优势

### 调试模式

1. **开启开发者工具**
   - 按 F12 或右键点击"检查"
   - 切换到 Console 选项卡

2. **查看插件日志**
   - 插件的日志信息会显示在Console中
   - 关键词：`AI图片描述优化助手`

3. **测试单个功能**
   - 可以在Console中手动调用插件函数进行测试

## 📋 系统要求

### 浏览器支持
- Chrome 88+ (推荐Chrome 100+)
- 支持Manifest V3的Chromium内核浏览器
- Edge 88+ (Chromium版本)

### 系统要求
- **本地模型**: 至少8GB内存，推荐16GB
- **云端模型**: 正常网络连接即可
- **存储空间**: 插件本身约5MB，本地模型需要3-8GB

### 网络要求
- **本地模型**: 仅需初次下载，后续无网络要求
- **云端模型**: 稳定的互联网连接
- **目标网站**: 需要能正常访问剪映网站

## 🔄 更新说明

### 手动更新
1. 下载最新版本的源码
2. 在 `chrome://extensions/` 页面点击"重新加载"
3. 配置和数据会自动保留

### 配置迁移
插件支持配置导入导出功能：
1. 在设置页面点击"导出数据"
2. 更新插件后点击"导入数据"
3. 选择之前导出的配置文件

---

🎉 **恭喜！**您已成功安装AI图片描述优化助手。现在可以开始体验智能化的图片描述优化功能了！

如有问题，请查看 [FAQ](README.md#常见问题) 或提交 [Issue](https://github.com/your-username/ai-image-optimizer/issues)。