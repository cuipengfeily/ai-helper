# AI图片描述优化助手 - 调整大小功能使用指南

## 功能概述

插件现在支持完整的拖拽移动和调整大小功能，包括：

- **拖拽移动**：点击插件头部可以拖拽到任意位置
- **调整大小**：使用右下角的手柄可以调整整个插件容器的大小
- **垂直滚动**：当内容超出容器高度时自动显示滚动条
- **位置记忆**：插件位置和大小会自动保存

## 调整大小功能详解

### 1. 调整大小手柄

- **位置**：插件右下角
- **图标**：↘ 符号
- **操作**：鼠标悬停时显示调整大小光标

### 2. 调整大小操作

1. **水平调整**：向右拖拽手柄可以增加整个插件容器的宽度
2. **垂直调整**：向上拖拽手柄可以增加整个插件容器的高度
3. **同时调整**：斜向拖拽可以同时调整整个插件容器的宽度和高度

### 3. 尺寸限制

- **最小宽度**：300px
- **最大宽度**：600px
- **最小高度**：400px
- **最大高度**：浏览器窗口高度的80%

### 4. 内容区域自适应

当调整整个插件容器大小时，内容区域会自动适应：

- **高度计算**：内容区域高度 = 插件容器高度 - 头部高度 - 边距
- **滚动条**：当内容超出可用高度时自动显示
- **滚动条样式**：美观的渐变滚动条，与插件主题一致
- **整体缩放**：整个插件界面会随着容器大小变化而缩放

## 滚动条功能

### 1. 容器级滚动条

- 当插件容器调整得比较小时，内容会被压缩
- 容器级滚动条确保所有内容都可以通过滚动访问
- 自动检测内容高度与容器高度，动态显示/隐藏滚动条

### 2. 内容区域滚动条

- 当内容区域的内容超出可用高度时显示
- 内容不足时自动隐藏滚动条

### 3. 滚动条样式

#### 容器级滚动条
- **宽度**：8px
- **轨道**：半透明白色背景
- **滑块**：半透明白色，悬停时加深
- **圆角**：4px圆角设计

#### 内容区域滚动条
- **宽度**：6px
- **轨道**：半透明白色背景
- **滑块**：渐变蓝色，悬停时加深
- **圆角**：3px圆角设计

### 4. 滚动行为

- **平滑滚动**：支持鼠标滚轮和拖拽滚动
- **内容保护**：确保所有内容都可以通过滚动访问
- **性能优化**：滚动时不影响插件其他功能
- **智能显示**：只在需要时显示滚动条

## 使用技巧

### 1. 最佳尺寸设置

- **紧凑模式**：宽度350px，高度500px（默认）
- **宽屏模式**：宽度500px，高度600px
- **全屏模式**：宽度600px，高度80vh

### 2. 位置建议

- **右上角**：不遮挡主要内容
- **右侧中央**：便于操作
- **自定义位置**：根据个人喜好调整

### 3. 内容管理

- **长描述**：调整高度以显示完整内容
- **多选项**：增加高度以显示所有下拉选项
- **结果查看**：调整大小以方便查看优化结果

## 故障排除

### 1. 调整大小不工作

**可能原因**：
- 浏览器不支持自定义调整大小
- 插件未正确加载

**解决方案**：
- 刷新页面重新加载插件
- 检查浏览器控制台是否有错误信息

### 2. 滚动条不显示

**可能原因**：
- 内容高度不足
- CSS样式冲突

**解决方案**：
- 确保插件高度足够大
- 检查是否有其他CSS影响滚动条显示

### 3. 位置丢失

**可能原因**：
- 浏览器存储被清除
- 插件重新初始化

**解决方案**：
- 重新调整到理想位置
- 插件会自动保存新位置

## 技术实现

### 1. 调整大小实现

```javascript
// 监听鼠标事件
resizeHandle.addEventListener('mousedown', startResize);
document.addEventListener('mousemove', onResizeMove);
document.addEventListener('mouseup', endResize);

// 计算新尺寸
const newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth + deltaX));
const newHeight = Math.max(minHeight, Math.min(maxHeight, startHeight + deltaY));
```

### 2. 内容区域调整

```javascript
// 调整内容区域高度
function adjustContentArea(containerHeight) {
  const headerHeight = header.offsetHeight;
  const padding = 40;
  const maxContentHeight = containerHeight - headerHeight - padding;
  
  contentArea.style.maxHeight = maxContentHeight + 'px';
  contentArea.style.overflowY = 'auto';
}
```

### 3. 位置保存

```javascript
// 保存位置和大小
chrome.storage.local.set({ 
  pluginPosition: { left, top },
  pluginSize: { width, height }
});
```

## 更新日志

### v1.2.0 (最新)
- ✅ 支持垂直调整大小
- ✅ 添加内容区域滚动功能
- ✅ 优化滚动条样式
- ✅ 改进位置和大小保存机制
- ✅ 增强拖拽体验

### v1.1.0
- ✅ 支持水平调整大小
- ✅ 添加拖拽移动功能
- ✅ 实现位置记忆功能

### v1.0.0
- ✅ 基础优化功能
- ✅ 固定定位显示
- ✅ 基本UI界面

## 测试页面

使用 `test-resize.html` 页面可以测试所有调整大小功能：

1. 打开测试页面
2. 确保插件已启用
3. 测试拖拽和调整大小功能
4. 验证滚动条显示

## 反馈和建议

如果您在使用过程中遇到问题或有改进建议，请：

1. 检查浏览器控制台是否有错误信息
2. 尝试刷新页面重新加载插件
3. 确认插件权限设置正确
4. 联系开发者提供详细反馈

---

**注意**：此功能需要现代浏览器支持，建议使用 Chrome 90+ 或 Firefox 88+ 版本。 