<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI图片描述优化助手 - 设置</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <!-- 头部 -->
    <header class="options-header">
      <div class="header-content">
        <div class="header-logo">
          <span class="logo-icon">📊</span>
          <h1>AI图片描述优化助手</h1>
        </div>
        <div class="header-version">版本 1.0.0</div>
      </div>
    </header>

    <!-- 主要内容 -->
    <main class="options-main">
      <!-- AI模型配置 -->
      <section class="settings-section">
        <h2 class="section-title">🤖 AI模型配置</h2>
        <div class="section-content">
          <div class="setting-group">
            <label class="setting-label">默认AI模型</label>
            <select class="setting-select" id="defaultModel">
              <option value="local-ollama">本地模型 (Ollama) - 免费</option>
              <option value="openai-free">ChatGPT - 需要API密钥</option>
              <option value="claude-free">Claude - 需要API密钥</option>
              <option value="gemini-free">Gemini - 需要API密钥</option>
            </select>
            <div class="setting-description">
              选择默认使用的AI模型。推荐本地模型，完全免费且保护隐私。
            </div>
          </div>
        </div>
      </section>

      <!-- API密钥配置 -->
      <section class="settings-section">
        <h2 class="section-title">🔑 API密钥配置</h2>
        <div class="section-content">
          <div class="api-warning">
            <span class="warning-icon">⚠️</span>
            <div class="warning-content">
              <strong>隐私提醒：</strong>API密钥仅存储在您的本地浏览器中，不会上传到任何服务器。
            </div>
          </div>

          <div class="setting-group">
            <label class="setting-label">OpenAI API密钥</label>
            <div class="input-group">
              <input type="password" class="setting-input" id="openaiApiKey" placeholder="sk-...">
              <button type="button" class="toggle-password" data-target="openaiApiKey">👁️</button>
            </div>
            <div class="setting-description">
              获取地址: <a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener">OpenAI API Keys</a>
            </div>
          </div>

          <div class="setting-group">
            <label class="setting-label">Claude API密钥</label>
            <div class="input-group">
              <input type="password" class="setting-input" id="claudeApiKey" placeholder="sk-ant-...">
              <button type="button" class="toggle-password" data-target="claudeApiKey">👁️</button>
            </div>
            <div class="setting-description">
              获取地址: <a href="https://console.anthropic.com/" target="_blank" rel="noopener">Anthropic Console</a>
            </div>
          </div>

          <div class="setting-group">
            <label class="setting-label">Gemini API密钥</label>
            <div class="input-group">
              <input type="password" class="setting-input" id="geminiApiKey" placeholder="AIza...">
              <button type="button" class="toggle-password" data-target="geminiApiKey">👁️</button>
            </div>
            <div class="setting-description">
              获取地址: <a href="https://makersuite.google.com/app/apikey" target="_blank" rel="noopener">Google AI Studio</a>
            </div>
          </div>
        </div>
      </section>

      <!-- 本地模型配置 -->
      <section class="settings-section">
        <h2 class="section-title">🏠 本地模型配置</h2>
        <div class="section-content">
          <div class="setting-group">
            <label class="setting-label">Ollama模型名称</label>
            <input type="text" class="setting-input" id="ollamaModel" placeholder="llama2" value="llama2">
            <div class="setting-description">
              本地Ollama支持的模型名称，如：llama2, mistral, qwen等。
              <br>安装教程: <a href="https://ollama.ai/" target="_blank" rel="noopener">Ollama官网</a>
            </div>
          </div>

          <div class="setting-group">
            <label class="setting-label">Ollama服务地址</label>
            <input type="text" class="setting-input" id="ollamaUrl" placeholder="http://localhost:11434" value="http://localhost:11434">
            <div class="setting-description">
              Ollama服务运行的地址，默认为本地11434端口。
            </div>
          </div>

          <div class="setting-group">
            <button type="button" class="test-btn" id="testOllama">
              🔧 测试本地模型连接
            </button>
            <div class="test-result" id="ollamaTestResult"></div>
          </div>
        </div>
      </section>

      <!-- 高级设置 -->
      <section class="settings-section">
        <h2 class="section-title">⚙️ 高级设置</h2>
        <div class="section-content">
          <div class="setting-group">
            <label class="setting-label">
              <input type="checkbox" class="setting-checkbox" id="autoApplyResult">
              自动应用优化结果
            </label>
            <div class="setting-description">
              优化完成后自动将结果填入原始输入框。
            </div>
          </div>

          <div class="setting-group">
            <label class="setting-label">
              <input type="checkbox" class="setting-checkbox" id="saveHistory">
              保存优化历史
            </label>
            <div class="setting-description">
              在本地保存最近的优化记录，方便回顾和重用。
            </div>
          </div>

          <div class="setting-group">
            <label class="setting-label">最大历史记录数</label>
            <input type="number" class="setting-input" id="maxHistoryCount" min="10" max="100" value="50">
            <div class="setting-description">
              最多保存多少条历史记录，超出后自动删除最旧的记录。
            </div>
          </div>
        </div>
      </section>

      <!-- 数据管理 -->
      <section class="settings-section">
        <h2 class="section-title">📊 数据管理</h2>
        <div class="section-content">
          <div class="setting-group">
            <div class="data-stats">
              <div class="stat-item">
                <span class="stat-label">今日使用次数:</span>
                <span class="stat-value" id="todayUsage">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">总使用次数:</span>
                <span class="stat-value" id="totalUsage">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">历史记录数:</span>
                <span class="stat-value" id="historyCount">0</span>
              </div>
            </div>
          </div>

          <div class="setting-group">
            <div class="data-actions">
              <button type="button" class="data-btn" id="exportData">
                📤 导出数据
              </button>
              <button type="button" class="data-btn" id="importData">
                📥 导入数据
              </button>
              <button type="button" class="data-btn danger" id="clearData">
                🗑️ 清除所有数据
              </button>
            </div>
            <input type="file" id="importFile" accept=".json" style="display: none;">
          </div>
        </div>
      </section>
    </main>

    <!-- 底部操作 -->
    <footer class="options-footer">
      <div class="footer-actions">
        <button type="button" class="footer-btn secondary" id="resetSettings">
          🔄 重置设置
        </button>
        <button type="button" class="footer-btn primary" id="saveSettings">
          💾 保存设置
        </button>
      </div>
      <div class="footer-info">
        <p>感谢使用AI图片描述优化助手！如有问题请联系开发者。</p>
      </div>
    </footer>

    <!-- 保存成功提示 -->
    <div class="toast" id="saveToast" style="display: none;">
      <span class="toast-icon">✅</span>
      <span class="toast-text">设置已保存</span>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>